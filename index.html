<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Specify debug messages as special string constants, and
    control debugging of packages via environment variables.">
<title>Debug R Packages • debugme</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Debug R Packages">
<meta property="og:description" content="Specify debug messages as special string constants, and
    control debugging of packages via environment variables.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">debugme</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0.9001</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/r-lib/debugme/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="debugme">debugme<a class="anchor" aria-label="anchor" href="#debugme"></a>
</h1></div>
<blockquote>
<p>Debug R Packages</p>
</blockquote>
<p><a href="https://travis-ci.org/r-lib/debugme" class="external-link"><img src="https://travis-ci.org/r-lib/debugme.svg?branch=master" alt="Linux Build Status"></a> <a href="https://ci.appveyor.com/project/gaborcsardi/debugme" class="external-link"><img src="https://ci.appveyor.com/api/projects/status/github/r-lib/debugme?svg=true" alt="Windows Build status"></a> <a href="http://www.r-pkg.org/pkg/debugme" class="external-link"><img src="http://www.r-pkg.org/badges/version/debugme"></a> <a href="http://www.r-pkg.org/pkg/debugme" class="external-link"><img src="http://cranlogs.r-pkg.org/badges/debugme" alt="CRAN RStudio mirror downloads"></a> <a href="https://codecov.io/github/r-lib/debugme?branch=master" class="external-link"><img src="https://img.shields.io/codecov/c/github/r-lib/debugme/master.svg" alt="Coverage Status"></a></p>
<p>Specify debug messages as special string constants, and control debugging of packages via environment variables. This package was largely influenced by the <a href="https://github.com/visionmedia/debug" class="external-link"><code>debug</code> npm package</a>.</p>
<div class="section level2">
<h2 id="installation-and-usage">Installation and Usage<a class="anchor" aria-label="anchor" href="#installation-and-usage"></a>
</h2>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"debugme"</span><span class="op">)</span></span></code></pre></div>
<p>To use <code>debugme</code> in your package, import it, and then add the following <code>.onLoad</code> function to your package:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">.onLoad</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">libname</span>, <span class="va">pkgname</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu">debugme</span><span class="fu">::</span><span class="fu"><a href="reference/debugme.html">debugme</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>You can now add debug messages via character literals. No function calls are necessary. For example:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="st">"!DEBUG Start up phantomjs"</span></span>
<span><span class="va">private</span><span class="op">$</span><span class="fu">start_phantomjs</span><span class="op">(</span><span class="va">phantom_debug_level</span><span class="op">)</span></span>
<span></span>
<span><span class="st">"!DEBUG Start up shiny"</span></span>
<span><span class="va">private</span><span class="op">$</span><span class="fu">start_shiny</span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span>
<span></span>
<span><span class="st">"!DEBUG create new phantomjs session"</span></span>
<span><span class="va">private</span><span class="op">$</span><span class="va">web</span> <span class="op">&lt;-</span> <span class="va">session</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>port <span class="op">=</span> <span class="va">private</span><span class="op">$</span><span class="va">phantom_port</span><span class="op">)</span></span>
<span></span>
<span><span class="st">"!DEBUG navigate to Shiny app"</span></span>
<span><span class="va">private</span><span class="op">$</span><span class="va">web</span><span class="op">$</span><span class="fu">go</span><span class="op">(</span><span class="va">private</span><span class="op">$</span><span class="fu">get_shiny_url</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>The string literals are simply ignored when debugging is turned off. To turn on debugging for a package, set the environment variable <code>DEBUGME</code> to the package name you want to debug. E.g. from a <code>bash</code> shell:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">DEBUGME</span><span class="op">=</span>mypackage</span></code></pre></div>
<p>Or from within R:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/Sys.setenv.html" class="external-link">Sys.setenv</a></span><span class="op">(</span>DEBUGME <span class="op">=</span> <span class="st">"mypackage"</span><span class="op">)</span></span></code></pre></div>
<p>Separate multiple package names with commas:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode sh"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="bu">export</span> <span class="va">DEBUGME</span><span class="op">=</span>mypackage,otherpackage</span></code></pre></div>
<p>The debug messages will be prefixed by the package names, and assuming your terminal supports color, will be colored differently for each package.</p>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<p><img src="inst/screencast.gif"></p>
</div>
<div class="section level2">
<h2 id="dynamic-code">Dynamic code<a class="anchor" aria-label="anchor" href="#dynamic-code"></a>
</h2>
<p>The <code>debugme</code> debug strings may contain R code between backticks. This code is evaluated at runtime, if debugging is turned on. A single debug string may contain multiple backticked code chunks:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="st">"!DEBUG x = `x`, y = `y`"</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (x <span class="sc">!=</span> y) {</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>...</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="motivation">Motivation<a class="anchor" aria-label="anchor" href="#motivation"></a>
</h2>
<p>I have always wanted a debugging tool that * is very simple to use, * can be controlled via environment variables, without changing anything it the packages themselves, * has zero impact on performance when debugging is off.</p>
<p><code>debugme</code> is such a tool.</p>
<div class="section level3">
<h3 id="performance">Performance<a class="anchor" aria-label="anchor" href="#performance"></a>
</h3>
<p>Function calls are relatively cheap in R, but they still do have an impact. If you never want to worry about the log messages making your code slower, you will like <code>debugme</code>. <code>debugme</code> debug strings have practically no performance penalty when debugging is off.</p>
<p>Here is a simple comparison to evaluate debugging overhead with a function call, <code>f1()</code>, debugging with debug strings, <code>f2()</code>, and no debugging at all.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">debug</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">msg</span><span class="op">)</span> <span class="op">{</span> <span class="op">}</span></span>
<span><span class="va">f1</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="reference/debug.html">debug</a></span><span class="op">(</span><span class="st">"foobar"</span><span class="op">)</span></span>
<span>    <span class="co"># Avoid optimizing away the loop</span></span>
<span>    <span class="va">i</span> <span class="op">&lt;-</span> <span class="va">i</span> <span class="op">+</span> <span class="fl">1</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f2</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="st">"!DEBUG foobar"</span></span>
<span>    <span class="co"># Avoid optimizing away the loop</span></span>
<span>    <span class="va">i</span> <span class="op">&lt;-</span> <span class="va">i</span> <span class="op">+</span> <span class="fl">1</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">f3</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fl">100</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># Avoid optimizing away the loop</span></span>
<span>    <span class="va">i</span> <span class="op">&lt;-</span> <span class="va">i</span> <span class="op">+</span> <span class="fl">1</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre></div>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">microbenchmark</span><span class="fu">::</span><span class="fu">microbenchmark</span><span class="op">(</span><span class="fu">f1</span><span class="op">(</span><span class="op">)</span>, <span class="fu">f2</span><span class="op">(</span><span class="op">)</span>, <span class="fu">f3</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">#&gt; Unit: microseconds</span></span>
<span><span class="co">#&gt;  expr    min      lq      mean median      uq       max neval cld</span></span>
<span><span class="co">#&gt;  f1() 19.585 20.8030 189.88149 21.718 23.5735 16721.969   100   a</span></span>
<span><span class="co">#&gt;  f2()  4.988  5.8665  26.00780  7.314  9.5685  1777.398   100   a</span></span>
<span><span class="co">#&gt;  f3()  4.513  5.4030  25.57436  6.354  8.3195  1793.295   100   a</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>MIT © <a href="https://github.com/gaborcsardi" class="external-link">Gábor Csárdi</a></p>
</div>
</div>
  </main><aside class="col-md-3"><div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=debugme" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/r-lib/debugme/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/r-lib/debugme/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing debugme</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Gábor Csárdi <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Gábor Csárdi.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
